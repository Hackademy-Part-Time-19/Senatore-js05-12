<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rubrica</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        * {
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
        }

        ::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .Edit {
            height: 35px;
            border-radius: 10px;
            background-color: #606060;
            width: 100px;
            margin-top: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: ease-in-out .1s;
            box-shadow: rgba(255, 255, 255, 0.2) 0px 2px 8px 0px;
        }

        .Edit:hover {
            transform: scale(1.02);
        }

        .Cta {
            width: 95%;
            height: 40px;
            border-radius: 20;
            background-color: black;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: ease-in-out .1s;
            box-shadow: rgba(255, 255, 255, 0.2) 0px 2px 8px 0px;
        }

        .Cta:hover {
            transform: scale(1.02);
        }
    </style>
</head>

<body style="background-color: black;">

    <div id="modaleAggiunta"
        style="position: absolute;width: 100%;height: 100%;background-color: rgba(0,0,0,0.8);display: flex;align-items: center;justify-content: center;display: none;">
        <div onclick="chiudiModaleAggiunta()" style="position: absolute; top:30px; right: 30px;cursor: pointer;">
            <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" viewBox="0 0 24 24">
                <path fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                    d="M6.758 17.243L12.001 12m5.243-5.243L12 12m0 0L6.758 6.757M12.001 12l5.243 5.243" />
            </svg>
        </div>
        <div
            style="height: 60vh;width: 350px;background-color: #202020;border-radius:30px;padding: 25px;display: flex;flex-direction: column;">
            <h3 style="color: white;text-align: center;margin-top: 10px;">Aggiungi contatto</h3>
            <div style="background-color: rgba(255,255,255,0);flex:6">
                <div>
                    <h5
                        style="color: white;margin-right: 10px; margin-left: 10px;margin-bottom: 10px;margin-top: 30px;font-weight: 400;">
                        Nome</h5>
                    <div style="display: flex;align-items: center;justify-content: center;">

                        <input id="inputNome" placeholder="Nome"
                            style="height: 35px;border-radius: 10px;padding-left: 20px;background-color: #606060; border: none;width: 90%;outline: none;color: white;" />
                    </div>
                </div>
                <div>
                    <h5
                        style="color: white;margin-right: 10px; margin-left: 10px;margin-bottom: 10px;margin-top: 30px;font-weight: 400;">
                        Cognome</h5>
                    <div style="display: flex;align-items: center;justify-content: center;">

                        <input id="inputCognome" placeholder="Congome"
                            style="height: 35px;border-radius: 10px;padding-left: 20px;background-color: #606060; border: none;width: 90%;outline: none;color: white;" />
                    </div>
                </div>
                <div>
                    <h5
                        style="color: white;margin-right: 10px; margin-left: 10px;margin-bottom: 10px;margin-top: 30px;font-weight: 400;">
                        Numero di telefono</h5>
                    <div style="display: flex;align-items: center;justify-content: center;">

                        <input id="inputNumero" placeholder="Numero"
                            style="height: 35px;border-radius: 10px;padding-left: 20px;background-color: #606060; border: none;width: 90%;outline: none;color: white;" />
                    </div>
                </div>
            </div>
            <div
                style="background-color: rgba(255,255,255,0);flex:1; display: flex;align-items: center;justify-content: center;">
                <div onclick="aggiungiContatto()" class="Cta">
                    <h5 style="color: white;font-weight: 600;">Salva</h5>
                </div>
            </div>
        </div>
    </div>


    <div style="display: flex; height: 100vh;">
        <div style="background-color: black;flex:1; border-right: 1px solid rgba(255,255,255,0.5);">

            <div style="display: flex;">

                <img src="https://www.w3schools.com/howto/img_avatar.png"
                    alt="Avatar"
                    style="width: 55px;height: 55px;border-radius: 50%;margin-left: 20px;margin-top: 20px;border: 2.5px solid white;">
                <h1 style="color: white;font-size: 25px;margin-left: 20px;margin-top: 35px;">Yuri Valente</h1>
            </div>
            <div style="display: flex; margin-left: 20px;margin-top: 20px;">

                <div style="width: 230px; background-color: #303030; height: 45px;border-radius: 10px;display: flex;">
                    <i class="fa fa-search"
                        style="font-size:20px; color:rgba(255,255,255,0.3); margin-left: 15px;margin-top: 10px;"></i>

                    <input oninput="ricercaUtenti()" id="inputSearch" placeholder="Cerca..."
                        style="height: 35px;border-radius: 10px;padding-left: 5px; border: none;width: 80%;margin-left: 10px;margin-top: 3px; background-color: #303030; color: white;outline: none;" />
                </div>
                <div onclick="apriModaleAggiunta()" style="margin-left: 25px;margin-top: 7px;cursor: pointer;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24">
                        <g fill="white" fill-rule="evenodd" clip-rule="evenodd">
                            <path
                                d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12Zm10-8a8 8 0 1 0 0 16a8 8 0 0 0 0-16Z" />
                            <path
                                d="M13 7a1 1 0 1 0-2 0v4H7a1 1 0 1 0 0 2h4v4a1 1 0 1 0 2 0v-4h4a1 1 0 1 0 0-2h-4V7Z" />
                        </g>
                    </svg>
                </div>
            </div>
        </div>
        <div id="containerContatti" style="background-color: black;flex:3.5; padding: 30px;padding-top: 20px;">


            <p id="noResultP"
                style="color: rgba(255, 255, 255, 0.6);font-size: 20px;text-align: center;font-weight: 500;margin-top: 30px;display: none;">
                Nessun risultato</p>
        </div>
    </div>


    <script>
        function apriModaleAggiunta() {
            document.getElementById("modaleAggiunta").style.display = "flex";
        }
        function chiudiModaleAggiunta() {
            document.getElementById("modaleAggiunta").style.display = "none";
        }
        let contatti = [];

        function ricercaUtenti() {
            console.log("ciao");
            let inputSearch = document.getElementById("inputSearch").value;

            if (!inputSearch) {
                for (let i = 0; i < contatti.length; i++) {
                    document.getElementById(`container-${i}-contatto`).style.display = "block";
                }
                document.getElementById("noResultP").style.display = "none";
                return;
            }

            let listaContatti = contatti.filter((contatto) => {
                return contatto.nome.startsWith(inputSearch) || contatto.cognome.startsWith(inputSearch) || contatto.numero.startsWith(inputSearch);
            })
            console.log(listaContatti);
            let listaIdContatti = listaContatti.map((contatto) => {
                return contatto.indice;
            })

            console.log(listaIdContatti);
            if (listaIdContatti.length == 0) {
                document.getElementById("noResultP").style.display = "block";
            } else {
                document.getElementById("noResultP").style.display = "none";
            }
            for (let i = 0; i < contatti.length; i++) {


                if (!listaIdContatti.includes(parseInt(id))) {
                    document.getElementById(`container-${i}-contatto`).style.display = "none";
                }
            }


        }


        let indiceConttatto = 0;

        function aggiungiContatto() {
            let nome = document.getElementById("inputNome").value
            let cognome = document.getElementById("inputCognome").value
            let numero = document.getElementById("inputNumero").value

            if (!nome || !cognome || !numero) {

                if (!nome) {
                    document.getElementById("inputNome").style.border = "1px solid red";
                }

                if (!cognome) {
                    document.getElementById("inputCognome").style.border = "1px solid red";
                }

                if (!numero) {
                    document.getElementById("inputNumero").style.border = "1px solid red";
                }

                return;
            }


            let contatto = {
                nome: nome,
                cognome: cognome,
                numero: numero,
                indice: indiceConttatto
            }


            contatti.push(contatto);



            document.getElementById("containerContatti").innerHTML += `<div id="container-${indiceConttatto}-contatto">
                <div id="div-${indiceConttatto}-contatto"
                    style="display: flex; border-bottom: 1px solid rgba(255,255,255,0.4); height: 60px;margin-top: 15px;">
                    <div style="flex: 1;background-color: black;display: flex;">
                        <h4 id="${indiceConttatto}-nome" style="color: white;margin-left: 10px;margin-top: 20px;">${nome}</h4>
                        <h4 id="${indiceConttatto}-cognome" style="color: white;margin-left: 10px;margin-top: 20px;">${cognome}</h4>
                    </div>
                    <div style="flex: 1;background-color: black;">
                        <h4 id="${indiceConttatto}-numero" style="color: white;margin-left: 10px;margin-top: 20px;">${numero}</h4>
                    </div>
                    <div style="flex: 1;background-color: black;display: flex;justify-content: flex-end;">


                        <div onClick="modificaContatto(${indiceConttatto})" class="Edit">
                            <h5 style="color: white;">Edit</h5>
                        </div>
                        <div  onClick="eliminaContatto(${indiceConttatto})" style="cursor: pointer;margin-top: 5px;margin-left: 20px;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 24 24">
                                <path fill="none" stroke="#ff6c6c" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="1.5"
                                    d="M6.758 17.243L12.001 12m5.243-5.243L12 12m0 0L6.758 6.757M12.001 12l5.243 5.243" />
                            </svg>
                        </div>
                    </div>
                </div>
                <div id="div-${indiceConttatto}-modifica-contatto"
                    style="display: flex; border-bottom: 1px solid rgba(255,255,255,0.4); height: 60px;margin-top: 15px;display:none">
                    <div style="flex: 1;background-color: black;display: flex;">
                        <input id="${indiceConttatto}-input-nome" placeholder="Nome"
                            style="height: 35px;border-radius: 10px;padding-left: 20px;background-color: #606060; border: none;width: 30%;outline: none;color: white;" />
                        <input id="${indiceConttatto}-input-cognome" placeholder="Cognome"
                            style="height: 35px;border-radius: 10px;padding-left: 20px;background-color: #606060; border: none;width: 30%;outline: none;color: white;margin-left: 10px;" />
                    </div>
                    <div style="flex: 1;background-color: black;">
                        <input id="${indiceConttatto}-input-numero" placeholder="Numero"
                            style="height: 35px;border-radius: 10px;padding-left: 20px;background-color: #606060; border: none;width: 60%;outline: none;color: white;" />
                    </div>
                    <div style="flex: 1;background-color: black;display: flex;justify-content: flex-end;">

                        <div onClick="annullaModificaContatto(${indiceConttatto})" class="Edit"
                            style="margin-right: 20px;background-color: black;border: 1px solid rgba(255,255,255,0.3)">
                            <h5 style="color: white;">Annulla</h5>
                        </div>
                        <div onClick="salvaModificaContatto(${indiceConttatto})" class="Edit">
                            <h5 style="color: white;">Salva</h5>
                        </div>

                    </div>
                </div>
            </div>`;

            chiudiModaleAggiunta();
            indiceConttatto++;
            document.getElementById("inputNome").value = "";
            document.getElementById("inputCognome").value = "";
            document.getElementById("inputNumero").value = "";
        }


        function modificaContatto(indice) {
            document.getElementById(`div-${indice}-contatto`).style.display = "none";
            document.getElementById(`div-${indice}-modifica-contatto`).style.display = "flex";

            let nome = document.getElementById(`${indice}-nome`).innerHTML;
            let cognome = document.getElementById(`${indice}-cognome`).innerHTML;
            let numero = document.getElementById(`${indice}-numero`).innerHTML;

            document.getElementById(`${indice}-input-nome`).value = nome;
            document.getElementById(`${indice}-input-cognome`).value = cognome;
            document.getElementById(`${indice}-input-numero`).value = numero;
        }

        function annullaModificaContatto(indice) {
            document.getElementById(`div-${indice}-contatto`).style.display = "flex";
            document.getElementById(`div-${indice}-modifica-contatto`).style.display = "none";
        }

        function eliminaContatto(indice) {
            document.getElementById(`container-${indice}-contatto`).remove();
        }

        function salvaModificaContatto(indice) {
            let inputNome = document.getElementById(`${indice}-input-nome`).value;
            let inputCognome = document.getElementById(`${indice}-input-cognome`).value;
            let inputNumero = document.getElementById(`${indice}-input-numero`).value;

            document.getElementById(`${indice}-nome`).innerHTML = inputNome;
            document.getElementById(`${indice}-cognome`).innerHTML = inputCognome;
            document.getElementById(`${indice}-numero`).innerHTML = inputNumero;


            document.getElementById(`div-${indice}-contatto`).style.display = "flex";
            document.getElementById(`div-${indice}-modifica-contatto`).style.display = "none";
        }
    </script>
</body>

</html>